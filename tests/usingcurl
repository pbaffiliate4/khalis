var advanced = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.protocol.core.ejbca.org/"><soapenv:Header/><soapenv:Body>                    <ws:certificateRequest>         <!--arg0 is userData. We need to specify at least the subjectDN and profile.          The rest of mandatory attributes may possibly have a fixed value?-->         <arg0>		<caName>ICA PP Qualified CA G4</caName>		<certificateProfileName>ICAQualifiedCAG4: AdvancedDocSigning</certificateProfileName>		<endEntityProfileName>ICAQualifiedCAG4: AdvancedDocSigning</endEntityProfileName>                <clearPwd>FALSE</clearPwd>                               <endTime>2018-02-15 05:00:00+00:00</endTime>                                            <keyRecoverable>FALSE</keyRecoverable>             <sendNotification>FALSE</sendNotification>             <status>10</status>                <subjectDN>CN=Test, C=AE, OU=UAE PASS, O=UAE Government</subjectDN>                <subjectAltName>rfc822Name=Test@Testmail.com</subjectAltName>                            <tokenType>USERGENERATED</tokenType>             <username>test1</username>         </arg0>        <!--arg1 is requestData. In our case it will be a SubjectPublicKeyInfo structure--> <arg1>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyE0pf/5tOR69TDr4OR67gjploYC/69QMLusTfy+0uVhy7jg7p4g6ZORgxBvUo4kPQLL0YpEG5jD2yKkk4etnZv2Mlk0SnFpcm4Eyd0F1Dpfgz3kCrr03I7oP7d9qSGS2WjahRzzJ985AsgjiyPBRz/e7KmtzrL2ZlbJhGDFFQFQQAi2YEaDsT/6cZ2PNyABNZgUWFQ0LK2kzAAGuT8lpHlzyDaDV6slQbVpQg3lvSM25w9XEIv8hsckm2v4JuHcq/1p6ldojIj0NDqVQLdDWBylG1pKzsB9uspDfHy8mn7kLND4yOdY1QUtJ6Cm9enrfUNFv9pEgFyg8FZJCSTlWSQIDAQAB</arg1><!--arg2 is requestType. In our case, CERT_REQ_TYPE_PUBLICKEY, which is 3--><arg2>3</arg2> <!--arg3 is hardTokenSN. Omitted in our case --><!--arg4 is responseType. In our case, RESPONSETYPE_CERTIFICATE, which is "CERTIFICATE"--><arg4>CERTIFICATE</arg4> </ws:certificateRequest></soapenv:Body></soapenv:Envelope>';
//return dm.issueCertificate("https://ejbca-ca.localdomain:8443/ejbca/ejbcaws/ejbcaws", advanced);
return dm.curl("https://ejbca-ca.localdomain:8443/ejbca/ejbcaws/ejbcaws", advanced, null, "dmcag4.pem", "dmcag4.key");